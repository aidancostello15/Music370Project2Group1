<!-- This is a comment in HTML -->
<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<head>
  <meta charset="utf-8">
  <title>ya YEET mofos</title>
  <link rel="stylesheet" type="text/css" href="css/styles.css">
</head>
<body>

<header>
  <h1>u lost boi???</h1>
</header>
  <img src="images/clubpenguinfire.jpg" width="750" height="500">
<main>
  <h2>Welcome to my Club Penguin fan page!</h2>
  <button id="playButton" class="play-transport" type="button"><img src="images/penguinguitar.jpg">kazoo</button>
  <button id="stopButton" class="stop-transport" type="button"><img src="images/penguinguitarred.jpg">no kazoo</button>
  <button id="transportButton" class="masterplay-transport" type="button">transport</button>
  <fieldset>
    <legend>Blow that horn!</legend>
    <button id="doNotPress" class="horn-transport" type="button">Air Horn On/Off</button>
    <!-- REPLACE 4 BUTTON CLASSES BELOW  -->
    <!-- (Ideally, replace the class for all speed buttons with a special
          speed button class. Something smaller/rounder? Want distinct) -->
    <button id="airHornSpeed1" class="horn-transport" type="button">Speed 1</button>
    <button id="airHornSpeed2" class="horn-transport" type="button">Speed 2</button>
    <button id="airHornSpeed3" class="horn-transport" type="button">Speed 3</button>
    <button id="airHornSpeed4" class="horn-transport" type="button">Speed 4</button>
    <fieldset>
      <legend>get high (or low)</legend>
      <label id="airHornPitchShiftLabel" for="airHornPitchShiftSlider">0</label>
      <input type="range" id="airHornPitchShiftSlider" name="airHornPitchShiftSlider" min="-14" max="14" step="0.5" />
    </fieldset>
  </fieldset>
  <fieldset>
    <legend>Punch somebody</legend>
    <button id="OOF" class="oof-transport" type="button">OOF On/Off</button>
    <!-- REPLACE 4 BUTTON CLASSES BELOW -->
    <button id="oofSpeed1" class="oof-transport" type="button">Speed 1</button>
    <button id="oofSpeed2" class="oof-transport" type="button">Speed 2</button>
    <button id="oofSpeed3" class="oof-transport" type="button">Speed 3</button>
    <button id="oofSpeed4" class="oof-transport" type="button">Speed 4</button>
    <fieldset>
      <legend>get high (or low)</legend>
      <label id="oofPitchShiftLabel" for="oofPitchShiftSlider">0</label>
      <input type="range" id="oofPitchShiftSlider" name="oofPitchShiftSlider" min="-14" max="14" step="0.5" />
    </fieldset>
  </fieldset>
  <fieldset>
    <legend>Dubstep, amirite?</legend>
    <button id="playButton1" class="loop-transport" type="button">Synth On/Off</button>
    <!-- REPLACE 4 BUTTON CLASSES BELOW -->
    <button id="synthSpeed1" class="loop-transport" type="button">Speed 1</button>
    <button id="synthSpeed2" class="loop-transport" type="button">Speed 2</button>
    <button id="synthSpeed3" class="loop-transport" type="button">Speed 3</button>
    <button id="synthSpeed4" class="loop-transport" type="button">Speed 4</button>
    <fieldset>
      <legend>get high (or low)</legend>
      <label id="synthPitchShiftLabel" for="synthPitchShiftSlider">0</label>
      <input type="range" id="synthPitchShiftSlider" name="synthPitchShiftSlider" min="-14" max="14" step="0.5" />
    </fieldset>
  </fieldset>
  <fieldset>
    <legend>Pretty, pretty!</legend>
    <button id="ricardo" class="rico-transport" type="button">Rico On/Off</button>
    <!-- REPLACE 4 BUTTON CLASSES BELOW -->
    <button id="ricoSpeed1" class="rico-transport" type="button">Speed 1</button>
    <button id="ricoSpeed2" class="rico-transport" type="button">Speed 2</button>
    <button id="ricoSpeed3" class="rico-transport" type="button">Speed 3</button>
    <button id="ricoSpeed4" class="rico-transport" type="button">Speed 4</button>
    <fieldset>
      <legend>get high (or low)</legend>
      <label id="ricoPitchShiftLabel" for="ricoPitchShiftSlider">0</label>
      <input type="range" id="ricoPitchShiftSlider" name="ricoPitchShiftSlider" min="-14" max="14" step="0.5" />
    </fieldset>
  </fieldset>
  <fieldset>
    <legend>Everybody wants to inhale helium or sulfur hexafluoride</legend>
    <label id="pitchShiftLabel" for="pitchShiftSlider">0</label>
    <input type="range" id="pitchShiftSlider" name="pitchShiftSlider" min="-14" max="14" step="0.5" />
  </fieldset>
</main>

<script src="js/Tone.js"></script>

<script>

//memes
// PITCH SHIFT VARIABLES
// Create a pitch shifter and connect its output to the master out
var pitchShift = new Tone.PitchShift().toMaster();
var airHornPitchShift = new Tone.PitchShift().toMaster();
var oofPitchShift = new Tone.PitchShift().toMaster();
var synthPitchShift = new Tone.PitchShift().toMaster();
var ricoPitchShift = new Tone.PitchShift().toMaster();

// Create a synth and connect it to the pitch shifter
var synth = new Tone.Synth({
  oscillator: {
    type: 'sine'
  },
  envelope: {
    attack: 0.01,
    decay: 0.1,
    sustain: 0.5,
    release: 1
  }
}).connect(synthPitchShift).connect(pitchShift);

// SOUND FILES
// Sample code to load a sound file
// NOTE: This sound file is not played in this script
var clave = new Tone.Player('audio/clave.mp3').toMaster();
var kazoo_kid = new Tone.Player("audio/kazoo_kid.mp3").connect(pitchShift);
var air_horn = new Tone.Player("audio/air_horn.mp3").toMaster().connect(airHornPitchShift).connect(pitchShift);
var oof = new Tone.Player("audio/oof.mp3").toMaster().connect(oofPitchShift).connect(pitchShift);
var ricosound = new Tone.Player("audio/synthmelody.mp3").toMaster().connect(ricoPitchShift).connect(pitchShift);

// PITCH VARIABLES, SLIDERS, AND FUNCTIONS
// Synth Pitch
var pitchShiftLabel = document.querySelector('#pitchShiftLabel');
var pitchShiftSlider = document.querySelector('#pitchShiftSlider');
pitchShiftSlider.addEventListener('input', function() {
  // assign slider value to pitch shift amount (in semitones)
  pitchShift.pitch = pitchShiftSlider.value;
  // update slider label
  pitchShiftLabel.innerHTML = pitchShiftSlider.value;
});
// Air Horn Pitch
var airHornPitchShiftLabel = document.querySelector('#airHornPitchShiftLabel');
var airHornPitchShiftSlider = document.querySelector('#airHornPitchShiftSlider');
airHornPitchShiftSlider.addEventListener('input', function() {
  airHornPitchShift.pitch = airHornPitchShiftSlider.value;
  airHornPitchShiftLabel.innerHTML = airHornPitchShiftSlider.value;
});
// Oof Pitch
var oofPitchShiftLabel = document.querySelector('#oofPitchShiftLabel');
var oofPitchShiftSlider = document.querySelector('#oofPitchShiftSlider');
oofPitchShiftSlider.addEventListener('input', function() {
  oofPitchShift.pitch = oofPitchShiftSlider.value;
  oofPitchShiftLabel.innerHTML = oofPitchShiftSlider.value;
});
// Synth Pitch
var synthPitchShiftLabel = document.querySelector('#synthPitchShiftLabel');
var synthPitchShiftSlider = document.querySelector('#synthPitchShiftSlider');
synthPitchShiftSlider.addEventListener('input', function() {
  synthPitchShift.pitch = synthPitchShiftSlider.value;
  synthPitchShiftLabel.innerHTML = synthPitchShiftSlider.value;
});
// Rico Pitch
var ricoPitchShiftLabel = document.querySelector('#ricoPitchShiftLabel');
var ricoPitchShiftSlider = document.querySelector('#ricoPitchShiftSlider');
ricoPitchShiftSlider.addEventListener('input', function() {
  ricoPitchShift.pitch = ricoPitchShiftSlider.value;
  ricoPitchShiftLabel.innerHTML = ricoPitchShiftSlider.value;
});


// LOOP FUNCTIONS
// A universal loop that you can put any sound in
function universalLoop(sound, rapid) {
  var soundLoop = new Tone.Loop(function(time) {
    sound.start(time);
  }, rapid);
  soundLoop.start();
}

// loop for synth
var synthLoop = new Tone.Loop(function(time) {
	synth.triggerAttackRelease("C2", "8n", time);
}, "4n");

// loop for oof
var oofLoop = new Tone.Loop(function(time) {
  oof.start(time);
}, "4n");

// loop for airHorn
var airHornLoop = new Tone.Loop(function(time) {
  air_horn.start(time);
}, "1n");

// loop for rico
var ricoLoop = new Tone.Loop(function(time) {
  ricosound.start(time);
}, "1n");


// START all the loops
synthLoop.start();
// The "8n" means the oof is delayed by 1/8 note, aka syncopated.
oofLoop.start("8n");
airHornLoop.start();
ricoLoop.start();

// MUTE all the loops
synthLoop.mute = true
oofLoop.mute = true;
airHornLoop.mute = true;
ricoLoop.mute = true

Tone.Transport.start();

// BUTTON FUNCTIONS
// Synth Button
document.querySelector('#playButton1').onclick = function() {
  console.log('The loop has started');
  Tone.context.resume();
  // This if statement will start the transport if it has not started
  if(Tone.Transport.State=="stopped") {
    Tone.Transport.start();
  };
  // This if statement will decide whether to mute/unmute
  if(synthLoop.mute===true){
    synthLoop.mute = false;
  } else {
    synthLoop.mute = true
  }
};
// Synth Speed Buttons
document.querySelector('#synthSpeed1').onclick = function() {
  synthLoop.interval = "1n";
};
document.querySelector('#synthSpeed2').onclick = function() {
  synthLoop.interval = "2n";
};
document.querySelector('#synthSpeed3').onclick = function() {
  synthLoop.interval = "4n";
};
document.querySelector('#synthSpeed4').onclick = function() {
  synthLoop.interval = "8n";
};

// Kazoo kid start
document.querySelector('#playButton').onclick = function() {
  console.log('Initiating start protocol');
  Tone.context.resume();
  if(Tone.Transport.State=="stopped") {
    Tone.Transport.start();
  };
  // Starts Kazoo Kid
  kazoo_kid.start()
};

// Kazoo kid stop
document.querySelector('#stopButton').onclick = function() {
  console.log('Initiating stop protocol');

  // Stop Kazoo Kid
  kazoo_kid.stop()
};

// Air Horn Button
document.querySelector('#doNotPress').onclick = function() {
  console.log('The world is ending');
  Tone.context.resume();
  if(Tone.Transport.State=="stopped") {
    Tone.Transport.start();
  };
  if(airHornLoop.mute===true){
    airHornLoop.mute = false;
  } else {
    airHornLoop.mute = true
  }
};
// Air Horn Speed Buttons
document.querySelector('#airHornSpeed1').onclick = function() {
  airHornLoop.interval = "2m";
};
document.querySelector('#airHornSpeed2').onclick = function() {
  airHornLoop.interval = "1n";
};
document.querySelector('#airHornSpeed3').onclick = function() {
  airHornLoop.interval = "1t";
};
document.querySelector('#airHornSpeed4').onclick = function() {
  airHornLoop.interval = "2n";
};

// Oof button
document.querySelector('#OOF').onclick = function() {
  console.log('rip roblox');
  Tone.context.resume();
  if(Tone.Transport.State=="stopped") {
    Tone.Transport.start();
  }
  if(oofLoop.mute===true){
    oofLoop.mute = false;
  } else {
    oofLoop.mute = true
  }
};
// Oof speed Buttons
document.querySelector('#oofSpeed1').onclick = function() {
  oofLoop.interval = "1n";
};
document.querySelector('#oofSpeed2').onclick = function() {
  oofLoop.interval = "2n";
};
document.querySelector('#oofSpeed3').onclick = function() {
  oofLoop.interval = "4n";
};
document.querySelector('#oofSpeed4').onclick = function() {
  oofLoop.interval = "8n";
};

// Rico Button
document.querySelector('#ricardo').onclick = function() {
  console.log('tunes');
  Tone.context.resume();
  if(Tone.Transport.State=="stopped") {
    Tone.Transport.start();
  }
  if(ricoLoop.mute===true){
    ricoLoop.mute = false;
  } else {
  ricoLoop.mute = true
  }
};
// Rico Speed Buttons
document.querySelector('#ricoSpeed1').onclick = function() {
  ricoLoop.interval = "3m";
};
document.querySelector('#ricoSpeed2').onclick = function() {
  ricoLoop.interval = "2m";
};
document.querySelector('#ricoSpeed3').onclick = function() {
  ricoLoop.interval = "1n";
};
document.querySelector('#ricoSpeed4').onclick = function() {
  ricoLoop.interval = "2n";
};


document.querySelector('#transportButton').onclick = function() {
  console.log('transport dat ish');
  // Start the audio context
  Tone.context.resume();
  // Start or stop transport
  Tone.Transport.toggle();
};

</script>

</body>
</html>
